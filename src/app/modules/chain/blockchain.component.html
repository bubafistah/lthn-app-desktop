
<div class="container-fluid" fxLayout="row">
    <mat-card fxFlex="25" style="padding: 0;">
        <mat-card-title style="padding: 16px;">Chain Information</mat-card-title>
        <mat-card-content style="padding: 0;">
            <mat-list *ngIf="chainInfo | ngrxPush as info" dense>

                <mat-list-item>Status: {{info.status }}</mat-list-item>
                <mat-list-item>Daemon Start: {{info.start_time * 1000 | amTimeAgo }}</mat-list-item>
                <mat-list-item>Height: {{info.height }}</mat-list-item>
                <mat-list-item>Top:&nbsp;<span [innerHTML]="info.top_block_hash | hashLink | keepHtml" ></span></mat-list-item>
                <mat-list-item>Difficulty: {{info.difficulty | hashrate }}</mat-list-item>
                <mat-list-item>Cumulative: {{info.cumulative_difficulty | hashrate }}</mat-list-item>
                <mat-list-item>Connect INC: {{info.incoming_connections_count }}</mat-list-item>
                <mat-list-item>Connect OUT: {{info.outgoing_connections_count }}</mat-list-item>
                <mat-list-item>TX Count: {{info.tx_count }}</mat-list-item>
                <mat-list-item>TX Pool Size: {{info.tx_pool_size }}</mat-list-item>
                <mat-list-item>Target Height: {{info.target_height }}</mat-list-item>
                <mat-list-item>Testnet: {{info.testnet }}</mat-list-item>
                <mat-list-item>Block Time: {{info.target }}</mat-list-item>

                <mat-list-item>White Peers: {{info.white_peerlist_size }}</mat-list-item>
                <mat-list-item>Grey Peers: {{info.grey_peerlist_size }}</mat-list-item>
                <mat-list-item>Alt Blocks: {{info.alt_blocks_count }}</mat-list-item>
                <mat-list-item>Block Size Limit: {{info.block_size_limit }}</mat-list-item>
            </mat-list>
        </mat-card-content>
    </mat-card>
    <mat-card fxFlex="75">
        <mat-card-title>Confidential Ledger Records</mat-card-title>
<!--        <mat-card-actions>-->
<!--            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">-->
<!--                <mat-icon>view_column</mat-icon>-->
<!--            </button>-->
<!--        </mat-card-actions>-->
        <mat-card-content>
            <p>This is using the local daemon, as you sync the chain the data shown will reflect the current network data</p>
            <ngx-datatable
                    class=" ngx-datatable"
                    [rows]="(blocks | ngrxPush)?.headers"
                    [loadingIndicator]="false"
                    [columns]="columns"
                    [columnMode]="ColumnMode.force"
                    [headerHeight]="30"
                    [footerHeight]="50"
                    rowHeight="20"
                    [limit]="25"
                    [sorts]="[{ prop: 'timestamp', dir: 'desc' }]"
            >
                <ngx-datatable-column *ngFor="let col of columns" [prop]="col.prop" [name]="col.name | translate">

                    <ng-template let-value="value" ngx-datatable-cell-template>
                        <span *ngIf="col.prop === 'difficulty'">{{ value | hashrate}}</span>
                        <span *ngIf="col.prop === 'height'">{{ value | number }}</span>
                        <span *ngIf="col.prop === 'hash'" [innerHTML]="value | hashLink:'txn' | keepHtml"></span>
                        <span *ngIf="col.prop === 'orphan_status'">
                            <mat-icon style="color: green" *ngIf="!value">done</mat-icon>
                            <mat-icon style="color: red" *ngIf="value">close</mat-icon>
                          </span>
                        <span *ngIf="col.prop === 'timestamp'">{{ value | amFromUnix }}</span>
                        <span *ngIf="col.prop === 'block_size'">{{ value | number }}</span>
                        <span *ngIf="col.prop === 'depth'">{{ value | number }}</span>
                        <span *ngIf="col.prop === 'major_version'">{{ value  }}</span>
                        <span *ngIf="col.prop === 'minor_version'">{{ value | number }}</span>
                        <span *ngIf="col.prop === 'nonce'">{{ value  }}</span>
                        <span *ngIf="col.prop === 'num_txes'">{{ value | number }}</span>
                        <span *ngIf="col.prop === 'prev_hash'">{{ value }}</span>
                    </ng-template>

                </ngx-datatable-column>

            </ngx-datatable>


<!--            <mat-menu #menu="matMenu">-->
<!--                <button mat-menu-item *ngFor="let col of allColumns" (click)="toggle(col)">-->
<!--                    <input type="checkbox" [id]="col.name" (click)="toggle(col)" [checked]="isChecked(col)" disabled/>&nbsp;-->
<!--                    <label [attr.for]="col.name">{{ col.name }}</label>-->
<!--                </button>-->
<!--            </mat-menu>-->
        </mat-card-content>
    </mat-card>
</div>
